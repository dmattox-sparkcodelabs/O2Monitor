{% extends "base.html" %}

{% block title %}Alerts - {{ app_name }}{% endblock %}

{% block content %}
<div class="alerts-page">
    <h1>Alert History</h1>

    <!-- Filters -->
    <div class="filter-controls">
        <select id="severity-filter">
            <option value="">All Severities</option>
            <option value="critical">Critical</option>
            <option value="warning">Warning</option>
            <option value="info">Info</option>
        </select>
        <select id="type-filter">
            <option value="">All Types</option>
            <option value="spo2_low">SpO2 Low</option>
            <option value="ble_disconnect">BLE Disconnect</option>
            <option value="system_error">System Error</option>
            <option value="test">Test</option>
        </select>
        <select id="time-filter">
            <option value="24">Last 24 Hours</option>
            <option value="72">Last 3 Days</option>
            <option value="168">Last 7 Days</option>
            <option value="720">Last 30 Days</option>
        </select>
        <button class="btn btn-sm btn-primary" id="refresh-alerts">Refresh</button>
    </div>

    <!-- Active Alerts -->
    <div class="active-alerts-section" id="active-alerts-section" style="display: none;">
        <h2>Active Alerts</h2>
        <div id="active-alerts-list" class="alerts-list">
            <!-- Populated by JavaScript -->
        </div>
    </div>

    <!-- Alert History -->
    <div class="alert-history-section">
        <h2>Alert History</h2>
        <table class="data-table" id="alerts-table">
            <thead>
                <tr>
                    <th>Time</th>
                    <th>Alert ID</th>
                    <th>Type</th>
                    <th>Severity</th>
                    <th>Message</th>
                    <th>SpO2</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="alerts-tbody">
                <!-- Populated by JavaScript -->
            </tbody>
        </table>
        <div id="no-alerts" class="no-data" style="display: none;">
            No alerts found for the selected time period.
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/alerts.js') }}?v=2"></script>
{% endblock %}
